<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIDI Generator Pro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="toast" class="toast"></div>
    
    <div class="container">
        <h1>üéµ MIDI Generator Pro</h1>
        <p class="subtitle">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –º–Ω–æ–≥–æ–≥–æ–ª–æ—Å–Ω—É—é –º—É–∑—ã–∫—É –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ | –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è v2.1</p>
        
        <!-- Quick Presets -->
        <div class="presets-section" id="presetsSection">
            <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–µ—Å–µ—Ç—ã</h3>
            <div class="preset-buttons">
                <button class="preset-btn" onclick="loadPreset('scale')">üéº –ì–∞–º–º–∞ C Major</button>
                <button class="preset-btn" onclick="loadPreset('chords')">üéπ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–∫–∫–æ—Ä–¥–æ–≤</button>
                <button class="preset-btn" onclick="loadPreset('melody')">üéµ –ü—Ä–æ—Å—Ç–∞—è –º–µ–ª–æ–¥–∏—è</button>
                <button class="preset-btn" onclick="loadPreset('piano')">üéπ –ú–µ–ª–æ–¥–∏—è + –ê–∫–∫–æ—Ä–¥—ã</button>
            </div>
        </div>
        
        <div class="main-grid">
            <!-- Left Column -->
            <div>
                <div class="control-panel">
                    <h3 style="margin-bottom: 15px; color: #333;">‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –Ω–æ—Ç—É/–∞–∫–∫–æ—Ä–¥</h3>
                    
                    <div class="settings-row">
                        <div class="control-group">
                            <label>üéº –ù–æ—Ç–∞:</label>
                            <select id="noteSelect">
                                <option value="48">C3 (–î–æ)</option>
                                <option value="50">D3 (–†–µ)</option>
                                <option value="52">E3 (–ú–∏)</option>
                                <option value="53">F3 (–§–∞)</option>
                                <option value="55">G3 (–°–æ–ª—å)</option>
                                <option value="57">A3 (–õ—è)</option>
                                <option value="59">B3 (–°–∏)</option>
                                <option value="60">C4 (–î–æ)</option>
                                <option value="61">C#4 (–î–æ#)</option>
                                <option value="62">D4 (–†–µ)</option>
                                <option value="63">D#4 (–†–µ#)</option>
                                <option value="64">E4 (–ú–∏)</option>
                                <option value="65">F4 (–§–∞)</option>
                                <option value="66">F#4 (–§–∞#)</option>
                                <option value="67">G4 (–°–æ–ª—å)</option>
                                <option value="68">G#4 (–°–æ–ª—å#)</option>
                                <option value="69">A4 (–õ—è)</option>
                                <option value="70">A#4 (–õ—è#)</option>
                                <option value="71">B4 (–°–∏)</option>
                                <option value="72">C5 (–î–æ)</option>
                                <option value="74">D5 (–†–µ)</option>
                                <option value="76">E5 (–ú–∏)</option>
                                <option value="77">F5 (–§–∞)</option>
                                <option value="79">G5 (–°–æ–ª—å)</option>
                                <option value="81">A5 (–õ—è)</option>
                                <option value="83">B5 (–°–∏)</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label>‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</label>
                            <select id="duration">
                                <option value="384">üéµ –¶–µ–ª–∞—è (1)</option>
                                <option value="288">ùÖóùÖ•. –ü–æ–ª–æ–≤–∏–Ω–Ω–∞—è —Å —Ç–æ—á–∫–æ–π</option>
                                <option value="192">ùÖóùÖ• –ü–æ–ª–æ–≤–∏–Ω–Ω–∞—è (1/2)</option>
                                <option value="144">‚ô©. –ß–µ—Ç–≤–µ—Ä—Ç–Ω–∞—è —Å —Ç–æ—á–∫–æ–π</option>
                                <option value="96" selected>‚ô© –ß–µ—Ç–≤–µ—Ä—Ç–Ω–∞—è (1/4)</option>
                                <option value="72">‚ô™. –í–æ—Å—å–º–∞—è —Å —Ç–æ—á–∫–æ–π</option>
                                <option value="48">‚ô™ –í–æ—Å—å–º–∞—è (1/8)</option>
                                <option value="24">‚ô¨ –®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–∞—è</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label>üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å: <span id="velocityDisplay">100</span></label>
                        <input type="range" id="velocity" value="100" min="0" max="127" 
                               oninput="document.getElementById('velocityDisplay').textContent = this.value">
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-add" onclick="addNote()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ—Ç—É</button>
                        <button class="btn-clear" onclick="clearNotes()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                    </div>
                </div>
                
                <!-- Chord Builder -->
                <div class="chord-builder">
                    <h4>üéπ –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞–∫–∫–æ—Ä–¥–æ–≤ (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–≤—É—á–∞–Ω–∏–µ)</h4>
                    <p style="font-size: 12px; margin-bottom: 10px; color: #1565c0;">–î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ—Ç, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∑–≤—É—á–∞—Ç—å –≤–º–µ—Å—Ç–µ</p>
                    <div class="chord-notes" id="chordNotes">
                        <span style="color: #999; font-size: 12px;">–ù–µ—Ç –Ω–æ—Ç –≤ –∞–∫–∫–æ—Ä–¥–µ</span>
                    </div>
                    <div class="button-group">
                        <button class="btn-add-to-chord" onclick="addToChord()">‚ûï –í –∞–∫–∫–æ—Ä–¥</button>
                        <button class="btn-clear-chord" onclick="clearChord()">üîÑ –û—á–∏—Å—Ç–∏—Ç—å</button>
                        <button class="btn-add" onclick="addChord()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–æ—Ä–¥</button>
                    </div>
                </div>
                
                <!-- Keyboard Shortcuts -->
                <div class="shortcuts">
                    <h4>‚å®Ô∏è –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</h4>
                    <p>
                        <kbd>Enter</kbd> - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ—Ç—É/–∞–∫–∫–æ—Ä–¥ | 
                        <kbd>Space</kbd> - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å<br>
                        <kbd>Ctrl+Del</kbd> - –æ—á–∏—Å—Ç–∏—Ç—å | 
                        <kbd>Ctrl+R</kbd> - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å | 
                        <kbd>Ctrl+L</kbd> - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–≤—Ç–æ—Ä
                    </p>
                </div>
            </div>
            
            <!-- Right Column -->
            <div>
                <!-- Player Section -->
                <div class="player-section" id="playerSection">
                    <h3 style="text-align: center; margin-bottom: 15px;">üéπ –ü—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å</h3>
                    
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-value" id="totalNotes">0</div>
                            <div class="stat-label">–≠–ª–µ–º–µ–Ω—Ç–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalDuration">0s</div>
                            <div class="stat-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="currentTempo">120</div>
                            <div class="stat-label">BPM</div>
                        </div>
                    </div>
                    
                    <div class="tempo-control">
                        <span>üéöÔ∏è –¢–µ–º–ø:</span>
                        <input type="range" id="tempoSlider" min="40" max="240" value="120" 
                               oninput="updateTempo(this.value)">
                        <span class="tempo-value" id="tempoValue">120 BPM</span>
                    </div>
                    
                    <div class="instrument-selector">
                        <label>üé∏ –¢–µ–º–±—Ä:</label>
                        <select id="waveform" onchange="updateWaveform(this.value)">
                            <option value="sine">üéπ –°–∏–Ω—É—Å–æ–∏–¥–∞ (–º—è–≥–∫–æ)</option>
                            <option value="square">üé∏ –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ (—Ä–µ—Ç—Ä–æ)</option>
                            <option value="sawtooth">üé∫ –ü–∏–ª–∞ (—è—Ä–∫–∏–π)</option>
                            <option value="triangle">üéª –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ (—Ç–µ–ø–ª—ã–π)</option>
                        </select>
                    </div>
                    
                    <div class="visualizer" id="visualizer">
                        <span>üéµ</span>
                        <div class="timeline" id="timeline"></div>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    
                    <div class="piano-roll" id="pianoRoll"></div>
                    
                    <div class="player-controls">
                        <button class="player-btn" id="playBtn" onclick="playMelody()" disabled>
                            <span>‚ñ∂Ô∏è</span> –ò–≥—Ä–∞—Ç—å
                        </button>
                        <button class="player-btn" id="stopBtn" onclick="stopMelody()" disabled>
                            <span>‚èπÔ∏è</span> –°—Ç–æ–ø
                        </button>
                        <button class="player-btn" id="loopBtn" onclick="toggleLoop()">
                            <span id="loopIcon">üîÅ</span> –ü–æ–≤—Ç–æ—Ä
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="notes-section">
            <h2>
                <span>üìù –°–ø–∏—Å–æ–∫ –Ω–æ—Ç –∏ –∞–∫–∫–æ—Ä–¥–æ–≤ (<span id="noteCount">0</span>)</span>
                <button class="player-btn" style="font-size: 12px; padding: 5px 15px;" onclick="reverseNotes()">
                    üîÑ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å
                </button>
            </h2>
            <div class="notes-list" id="notesList">
                <div class="empty-state">
                    <p>–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–æ—Ç</p>
                    <p style="font-size: 14px; margin-top: 10px;">–î–æ–±–∞–≤—å—Ç–µ –Ω–æ—Ç—ã –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç</p>
                </div>
            </div>
        </div>
        
        <button class="btn-generate" id="generateBtn" onclick="generateMIDI()" disabled>
            üíæ –°–∫–∞—á–∞—Ç—å MIDI —Ñ–∞–π–ª
        </button>
    </div>
    
    <script src="script.js"></script>
</body>
</html>